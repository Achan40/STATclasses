(function($, jQuery) {window.Chegg_TextMeTheApp=function(e,n,t,a,o,i,r){"use strict";function s(){if(!P.prop("disabled")){p(),window.oc.events.fire("text-me-the-app:submitted",{parent:n});var t=T.val();t&&/\d{3}-\d{3}-\d{4}/.test(t)?e.ajax({url:"/_ajax/notification/sendbranchsms",type:"POST",data:{token:C.global.csrfToken,phoneNumber:t,template:a,tags:o,campaign:i,pageUrl:r},success:function(e){e&&e.success?(window.oc.events.fire("text-me-the-app:success",{parent:n}),l(t)):(d(),u("Error sending message. Please try again."))},error:function(e){console.log("Error sending sms: "+JSON.stringify(e)),d(),u("Error sending message. Please try again.")}}):(d(),u("Please enter a valid phone number."))}}function p(){P.prop("disabled",!0)}function d(){P.prop("disabled",!1)}function l(e){D.hide(),"inline-flip"==t?(j.html("•••• "+e.split("-")[2]),$.addClass("flipped")):"appPromotion"==t?c():(S.hide(),N.hide(),E.show())}function c(){m(),O.addClass("success"),A.html("The Chegg Study app has been sent to your device."),v()}function m(){O.removeClass("error"),S.removeClass("error")}function u(e){"appPromotion"==t?h(e):f(e)}function f(e){D.html(e).show()}function h(e){S.addClass("error"),O.addClass("error"),A.html(e),v()}function b(e){e.addClass(J)}function g(e){e.removeClass(J)}function v(){g(_)}function x(){b(_)}function w(){"appPromotion"==t?(S.addClass("app-promotion"),T.addClass("input-app-promotion"),j.addClass("app-promotion"),N.remove(),D.remove(),E.remove()):_.remove()}function y(){switch(t){case"inline-flip":P.addClass("btn-special btn-sm").html("Text me");break;case"appPromotion":P.addClass("btn-app-promotion").html("Text me");break;case"standalone":default:P.addClass("btn-primary-outline btn-lg").html("Send")}}var k=e(n),P=k.find("button.textmetheapp-send-button"),T=k.find('input[name="textmetheapp-number-input"]'),S=k.find(".textmetheapp-number-container"),$=k.find(".textmetheapp-container"),E=k.find(".textmetheapp-confirmation"),j=k.find(".textmetheapp-confirmation-number"),D=k.find(".textmetheapp-error"),N=k.find(".textmetheapp-disclaimer"),O=k.find(".textmetheapp-result-icon"),_=k.find(".textmetheapp-result"),A=k.find(".textmetheapp-result p");const J="hidden";!function(){x(),w(),y()}(),P.on("click",function(e){e.preventDefault(),s()}),T.on("keyup",function(n){var t=e(n.currentTarget),a=t.val();a=a.replace(/\D/g,""),a=a.replace(/(\d{3})(\d{1,3})(\d*)/,"$1-$2-$3"),a=a.replace(/\-$/,""),t.val(a)}),T.on("keydown",function(e){13===e.keyCode&&s()})};})(cheggJQuery, cheggJQuery);